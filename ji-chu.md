# **新建正则表达式**

```
方式一：直接量语法
var reg = /pattern/attributes
方式二：创建 RegExp 对象的语法
 var reg = new RegExp(pattern, attributes);
```

**参数说明：**

参数 pattern 是一个字符串，指定了正则表达式的模式或其他正则表达式。  
参数 attributes 是一个可选的字符串，包含属性 “g”、”i” 和 “m”，分别用于指定全局匹配、区分大小写的匹配和多行匹配。

ECMAScript 标准化之前，不支持 m 属性。

如果 pattern 是正则表达式，而不是字符串，则必须省略该参数。

**两者区别在于：**

1.采用直接量语法新建的正则表达式对象在代码编译时就会生成，是平常开发中常用的方式；

2.采用构造函数生成的正则对象要在代码运行时生成。

## 基本元字符

1. `.` ： 匹配除了换行符之外的任何单个字符
2. `\` ： 在非特殊字符之前的反斜杠表示下一个字符是特殊的，不能从字面上解释。例如，没有前\的'b'通常匹配小写'b'，无论它们出现在哪里。如果加了'\',这个字符变成了一个特殊意义的字符，反斜杠也可以将其后的特殊字符，转义为字面量。例如，模式 `/a*/` 代表会匹配 0 个或者多个 a。相反，模式 `/a\*/` 将 '\*' 的特殊性移除，从而可以匹配像 `"a*"` 这样的字符串。
3. `|` ： 逻辑或操作符
4. `[]` ：定义一个字符集合，匹配字符集合中的一个字符，在字符集合里面像 `.`，`\`这些字符都表示其本身
5. `[^]`：对上面一个集合取非
6. `-` ：定义一个区间，例如`[A-Z]`，其首尾字符在 ASCII 字符集里面

![](/assets/zhengze_02.png)

#### 数量元字符 {#-}

1. `{m,n}` ：匹配前面一个字符至少 m 次至多 n 次重复，还有`{m}`表示匹配 m 次，`{m,}`表示至少 m 次
2. `+` ： 匹配前面一个表达式一次或者多次，相当于 `{1,}`，记忆方式追加\(+\)，起码得有一次
3. `*` ： 匹配前面一个表达式零次或者多次，相当于 `{0,}`，记忆方式乘法\(\*\)，可以一次都没有
4. `?` ： 单独使用匹配前面一个表达式零次或者一次，相当于 `{0,1}`，记忆方式，有吗？，有\(1\)或者没有\(1\)，如果跟在任何量词`*`,`+`,`?`,`{}`后面的时候将会使量词变为非贪婪模式（尽量匹配少的字符），默认是使用贪婪模式。比如对 "123abc" 应用 `/\d+/` 将会返回 "123"，如果使用 `/\d+?/`,那么就只会匹配到 "1"。

![](/assets/zhengze_02.png)

#### 位置元字符 {#-}

1. `^` ： 单独使用匹配表达式的开始
2. $ ： 匹配表达式的结束
3. `\b`：匹配单词边界
4. `\B`：匹配非单词边界
5. `(?=p)`：匹配 p 前面的位置
6. `(?!p)`：匹配不是 p 前面的位置

#### 特殊元字符 {#-}

1. `\d`：`[0-9]`，表示一位数字，记忆方式 digit
2. `\D`：`[^0-9]`，表示一位非数字
3. `\s`：`[\t\v\n\r\f]`，表示空白符，包括空格，水平制表符（`\t`），垂直制表符（`\v`），换行符（`\n`），回车符（`\r`），换页符（`\f`），记忆方式 space character
4. `\S`：`[^\t\v\n\r\f]`，表示非空白符
5. `\w`：`[0-9a-zA-Z]`，表示数字大小写字母和下划线，记忆方式 word
6. `\W`：`[^0-9a-zA-Z]`，表示非单词字符

#### 标志字符 {#-}

1. `g` : 全局搜索 记忆方式global
2. `i` ：不区分大小写 记忆方式 ignore
3. `m` ：多行搜索

#### 分组匹配

'123'.replace\(/\(1\)\(2\)\(3\)/,'$3$2$1'\)   //321

# 方法

#### test方法 {#test方法}

检索字符串中指定的值。返回 true 或 false。  
如果字符串 string 中含有与 RegExpObject 匹配的文本，则返回 true，否则返回 false。

#### exec方法 {#exec方法}

exec\(\) 方法用于检索字符串中的正则表达式的匹配。  
返回一个数组，其中存放匹配的结果。如果未找到匹配，则返回值为 null。

对于调用exec方法后返回的数组具有以下两个属性：

* **input**
  整个原待匹配的字符串
* **index**
  整个模式匹配成功的开始位置

#### search方法

search\(\) 方法用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串。  
**返回值：**stringObject 中第一个与 regexp 相匹配的子串的起始位置。  
**注释：**如果没有找到任何匹配的子串，则返回 -1。  
search\(\) 方法不执行全局匹配，它将忽略标志 g。它同时忽略 regexp 的 lastIndex 属性，并且总是从字符串的开始进行检索，这意味着它总是返回 stringObject 的第一个匹配的位置。

#### match方法

match\(\) 方法可在字符串内检索指定的值，或找到一个或多个正则表达式的匹配。该方法类似 indexOf\(\) 和 lastIndexOf\(\)，但是它返回指定的值，而不是字符串的位置。  
字符串对象的match方法与正则对象的exec方法比较类似：  
但是如果正则表达式带有g修饰符，那么match方法与exec方法就有差别了:  
可以看到match返回了所有成功匹配的结果，但是exec方法只返回了一个。

#### replace方法

replace\(\) 方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。  
**返回值：**一个新的字符串，是用 replacement 替换了 regexp 的第一次匹配或所有匹配之后得到的。  
字符串 stringObject 的 replace\(\) 方法执行的是查找并替换的操作。它将在 stringObject 中查找与 regexp 相匹配的子字符串，然后用 replacement 来替换这些子串。如果 regexp 具有全局标志 g，那么 replace\(\) 方法将替换所有匹配的子串。否则，它只替换第一个匹配子串。

#### split方法

split\(‘字符串的分割正则’,’返回数组的最大成员数’\)；返回分割后各部分组成的数组

